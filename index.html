<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <header id="header">
    <img src="geoLocus_small.png" alt="geoLocus logotyp" id="logo">
  </header>
  
  <title>geoLocus</title>

  <!-- Egen CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jersey+10&display=swap" rel="stylesheet">

  <!-- Leaflet CSS (f√∂r kartan) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

  <!-- SheetJS (xlsx) f√∂r att l√§sa/skriva Excel -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

  <!-- Turf.js (f√∂r geospatiell analys) -->
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js"></script>

  <!-- L√§gg till Proj4.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.6.2/proj4.js"></script>


</head>
<body>

  <main class="container">
    <!-- Rubriker -->
    <p class="subtitle">Hitta platsens l√§n, kommun och landskap</p>
    <p>Anv√§nd s√∂kfunktionen eller klicka direkt i kartan.</p>

<!-- üîç S√∂kning efter plats -->
<section id="search-section">
  <div id="place-search">
    <input id="placeName" type="text" placeholder="Plats (t.ex. Stockholm)" />
    <button id="searchPlaceButton">S√∂k plats</button>

    <!-- Visar resultatlista fr√•n platss√∂kning -->
    <div id="results"></div>
  </div>

  <div id="search">
    <input id="latitude" type="text" placeholder="Latitud (t.ex. 62.0)" />
    <input id="longitude" type="text" placeholder="Longitud (t.ex. 15.0)" />
    <button id="searchButton">S√∂k koordinater</button>
  </div>
</section>   

    <br>

    <!-- üó∫Ô∏è Karta -->
    <section id="map-section">
      <div id="map"></div>
    </section>

    <br>

<!-- üîÑ Koordinatkonvertering -->
<section id="coordinate-converter">
  <h2>Konvertera koordinater</h2>

  <div class="converter-fields">
    <input type="text" id="wgs84Input" placeholder="WGS84 (Lat, Lon)">
    <input type="text" id="rt90Input" placeholder="RT90 (X, Y)">
    <input type="text" id="swerefInput" placeholder="SWEREF 99 (X, Y)">
    <button id="convertButton">Konvertera</button>
  </div>

  <div id="conversion-results">
    <h3>Resultat:</h3>
    <p><strong>WGS84:</strong> <span id="wgs84Result">-</span></p>
    <p><strong>RT90:</strong> <span id="rt90Result">-</span></p>
    <p><strong>SWEREF99:</strong> <span id="swerefResult">-</span></p>
  </div>
</section>


    <!-- üìÇ H√§mta geodata fr√•n koordinater -->
    <section id="geo-instructions">
      <h2>H√§mta geodata fr√•n koordinater</h2>
      <p>Ladda upp en Excel-fil med koordinater och f√• tillbaka en fil d√§r varje punkt kopplas till l√§n, landskap (eller lappmark) och kommun.</p>

      <ol>
        <li>V√§lj din Excel-fil</li>
        <li>Klicka p√• <strong>"H√§mta geodata"</strong></li>
        <li>Den bearbetade filen laddas ner automatiskt</li>
      </ol>

      <!-- Filuppladdning f√∂r Excel + knapp f√∂r att starta bearbetning -->
      <div id="excel-upload">
        <label for="excelFile" class="custom-file-upload">
          <i class="fas fa-upload"></i> V√§lj fil
        </label>
        <input type="file" id="excelFile" accept=".xlsx,.xls" />
        <button id="processBtn">H√§mta geodata</button>
      <!-- Flytta in "Vald fil"-elementet h√§r: -->
        <span id="selectedFileName" class="file-info"></span>
      </div>
      

      <br>

      <!-- üìë Filformat & krav -->
      <h3>Filformat & krav</h3>
      <p>Filen du laddar upp ska vara i <strong>Excel-format</strong> (<code>.xlsx</code> eller <code>.xls</code>) och inneh√•lla f√∂ljande kolumner:</p>

      <table>
        <tbody>
          <tr>
            <td><code>id</code></td>
            <td>Unikt rad-ID (t.ex. katalognummer eller lokal-id; <em>valfritt</em>)</td>
          </tr>
          <tr>
            <td><code>lat</code></td>
            <td>Latitud i decimaltal</td>
          </tr>
          <tr>
            <td><code>lon</code></td>
            <td>Longitud i decimaltal</td>
          </tr>
        </tbody>
      </table>

      <br>

      <!-- ‚ÑπÔ∏è Viktig information -->
      <h3>Viktigt</h3>
      <ul>
        <li>Kolumnnamnen m√•ste skrivas exakt som ovan (sm√• bokst√§ver)</li>
        <li>Koordinaterna ska vara i WGS84</li>
        <li>Decimaler ska anges med punkt (<code>.</code>), inte komma (<code>,</code>)</li>
      </ul>

      <!-- ‚ÑπÔ∏è Datak√§llor -->
      <h3>Datak√§llor</h3>
      <details>
        <summary>Klicka f√∂r mer information</summary>
        <p>Bakgrundskartan kommer fr√•n OpenStreetMap. Information om adress, kommun och l√§n h√§mtas via Nominatims geokodningstj√§nst.</p>
        <p>Lagren som kan t√§ndas och sl√§ckas i kartan baseras p√•:</p>
        <ul>
          <li>L√§n: Lantm√§teriets Sverigekartor</li>
          <li>Kommun: Lantm√§teriets Sverigekartor</li>
          <li>Landskap: Lantm√§teriets distriktsindelning</li>
          <li>Lappmarkerna √§r avgr√§nsade med hj√§lp av kommungr√§nser</li>
        </ul>
        <p>Information om l√§n och kommun kan skilja sig mellan OpenStreetMap/Nominatim och Lantm√§teriets data, s√§rskilt om punkten ligger mycket n√§ra en gr√§ns.</p>
        <p>N√§r du h√§mtar geodata baseras l√§n och kommun p√• data fr√•n Lantm√§teriet, inte OpenStreetMap.</p>
      </details>
    </section>

    <br>
  </main>

  <!-- üìú JavaScript-filer -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="script.js"></script>

  <!-- ‚ö° Footer -->
  <footer>
    <a href="https://github.com/alotsa" target="_blank" class="github-link">
      <img src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/github.svg" alt="GitHub" class="github-icon">
    </a>
  </footer>

</body>
</html>
